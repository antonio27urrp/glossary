# Отчет по лабораторной работе

## Тема: Микросервисный глоссарий на gRPC

---

## 1. Описание проекта

В рамках данной лабораторной работы был разработан микросервис **«Глоссарий»**, обеспечивающий хранение и управление техническими терминами. Основной задачей являлся переход от архитектуры **REST** к высокопроизводительному протоколу **gRPC**.

### Структура проекта

- `/rest` — исходная реализация на базе **FastAPI** и формата **JSON**
- `/grpc` — новая реализация с использованием **gRPC**, **Google Protocol Buffers** и **HTTP/2**
- `app/glossary.proto` — контракт интерфейса, определяющий структуру данных и доступные методы
- `database.db` — локальная база данных **SQLite**, управляемая через **SQLModel**

---

## 2. Реализация gRPC сервиса

Разработанный gRPC-сервис поддерживает полный набор CRUD-операций, описанных в файле конфигурации **proto3**:

- **GetTerms** — получение всех терминов
- **GetTerm** — поиск определения по ключевому слову
- **AddTerm** — добавление нового термина
- **UpdateTerm** — обновление описания существующего термина
- **DeleteTerm** — удаление записи

Для генерации серверного и клиентского кода использовалась утилита:

```
python -m grpc_tools.protoc
```

---

## 3. Исследовательская часть: сравнение REST, gRPC и GraphQL

В ходе исследования были проанализированы ключевые характеристики трех подходов к построению API.

### Сравнительная таблица

| Характеристика       | REST         | gRPC                     | GraphQL                      |
| -------------------- | ------------ | ------------------------ | ---------------------------- |
| Протокол передачи    | HTTP/1.1     | HTTP/2                   | HTTP/1.1 / HTTP/2            |
| Формат данных        | JSON (текст) | Protobuf (бинарный)      | JSON (текст)                 |
| Типизация            | Слабая       | Строгая (Contract-first) | Строгая (Schema-first)       |
| Производительность   | Средняя      | Высокая                  | Зависит от сложности запроса |
| Браузерная поддержка | Отличная     | Требует gRPC-Web         | Хорошая                      |

### Основные выводы

- **Эффективность передачи данных**: благодаря бинарному формату Protobuf размер сообщений в gRPC на **30–50% меньше**, чем у аналогичных JSON-объектов.
- **Скорость**: мультиплексирование запросов в HTTP/2 позволяет значительно снизить накладные расходы и ускорить обработку запросов.
- **Надежность**: строгая типизация в `.proto`-контрактах гарантирует согласованность клиента и сервера, что особенно важно в микросервисной архитектуре.

---

## 4. Результаты тестирования

Работоспособность сервиса подтверждена с помощью разработанного тестового клиента `test_client.py`.

### Лог успешного тестирования

```
--- Добавление термина ---
Добавлено: gRPC

--- Список всех терминов ---
[*] gRPC: Высокопроизводительный фреймворк от Google
```

Результаты тестирования подтверждают:

- корректную сериализацию и десериализацию данных;
- успешное сохранение данных в базе SQLite;
- стабильную передачу данных по протоколу gRPC.

---

## 5. Инструкция по запуску (Deployment)

1. Установить зависимости:

   ```
   pip install -r requirements.txt
   ```

2. Сгенерировать gRPC-код:

   ```
   python -m grpc_tools.protoc -I. --python_out=. --grpc_python_out=. app/glossary.proto
   ```

3. Запустить сервер:

   ```
   python -m app.main
   ```

4. Запустить тестовый клиент:

   ```
   python test_client.py
   ```

---

## Заключение

В результате лабораторной работы был успешно реализован микросервис с использованием gRPC. Проведенное сравнение показало, что gRPC является более эффективным решением для высоконагруженных и микросервисных систем по сравнению с классическим REST-подходом.
